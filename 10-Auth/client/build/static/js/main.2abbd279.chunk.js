(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{167:function(e,t,n){},238:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),s=n(144),a=n(83),o=n(13),i=(n(167),n(168),n(27)),u=n(20),l=n(43),j=n(156),h=n(242),d=n(239),b=n(5);function p(e){var t,n,c=e.comment;return Object(b.jsxs)(d.a,{style:{marginTop:10},children:[Object(b.jsxs)("div",{style:{display:"flex"},children:[Object(b.jsx)(h.a,{src:null===(t=c.user)||void 0===t?void 0:t.image,style:{paddingRight:10}}),Object(b.jsx)("h3",{children:null===(n=c.user)||void 0===n?void 0:n.name})]}),Object(b.jsx)("h2",{children:c.content}),Object(b.jsx)("span",{children:c.createdAt})]})}var O=n(240),f=n(50),x=n(158),m=r.a.createContext({user:null,setUser:function(){},showUserModal:!1,setShowUserModal:function(){}}),g=m;function v(){return(v=Object(l.a)(Object(i.a)().mark((function e(){var t,n,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token"))){e.next=9;break}return e.next=4,fetch("http://localhost:3001/users/getLoggedIn",{headers:{"Content-Type":"application/json",token:t}});case 4:return n=e.sent,e.next=7,n.json();case 7:return c=e.sent,e.abrupt("return",c.data);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){var t=e.children,n=r.a.useState(null),s=Object(u.a)(n,2),a=s[0],o=s[1],i=Object(c.useState)(!1),l=Object(u.a)(i,2),j=l[0],h=l[1];return Object(c.useEffect)((function(){(function(){return v.apply(this,arguments)})().then((function(e){x.a.info({message:"You are logged in."}),o(e)}))}),[]),Object(b.jsx)(m.Provider,{value:{user:a,setUser:o,showUserModal:j,setShowUserModal:h},children:t})}function w(){return(w=Object(l.a)(Object(i.a)().mark((function e(t){var n,c,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.stringify({comment:t}),n=localStorage.getItem("token"),e.next=4,fetch("http://localhost:3001/comments",{method:"POST",headers:{"Content-Type":"application/json",token:n},body:t});case 4:return c=e.sent,e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){var t=e.postId,n=e.fetchPost,r=Object(c.useState)(""),s=Object(u.a)(r,2),a=s[0],o=s[1],i=Object(c.useContext)(g),l=i.user,j=i.setShowUserModal;return Object(b.jsxs)(d.a,{children:[Object(b.jsx)("h2",{children:"Add Comment "}),l?Object(b.jsxs)("div",{children:[Object(b.jsx)(O.a,{placeholder:"Comment",value:a,onChange:function(e){return o(e.target.value)}}),Object(b.jsx)(f.a,{t:!0,ype:"primary",onClick:function(){(function(e){return w.apply(this,arguments)})({content:a,postId:t}).then((function(e){console.log(e),n()})).catch((function(e){alert(e.message)}))},children:"Add Comment"})]}):Object(b.jsx)(f.a,{type:"link",onClick:function(){return j(!0)},children:"Login First"})]})}function C(){return(C=Object(l.a)(Object(i.a)().mark((function e(t){var n,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3001/posts/".concat(t)).catch((function(e){console.log(e)}));case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){var e=Object(o.g)(),t=Object(c.useState)(),n=Object(u.a)(t,2),r=n[0],s=n[1],a=Object(c.useState)(!0),i=Object(u.a)(a,2),l=i[0],d=i[1],O=function(){return function(e){return C.apply(this,arguments)}(e.postId).then((function(e){s(e.data),d(!1)}))};return Object(c.useEffect)((function(){O()}),[]),c.useEffect,Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Post"}),l?Object(b.jsx)(j.a,{}):Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:r.title}),Object(b.jsxs)("div",{style:{display:"flex"},children:[Object(b.jsx)(h.a,{src:r.user.image,style:{paddingRight:10}}),Object(b.jsx)("h3",{children:r.user.name})]}),Object(b.jsx)("p",{children:r.content}),Object(b.jsx)("h2",{children:"All Comments"}),Object(b.jsx)(k,{postId:r._id,fetchPost:O}),r.comments.map((function(e){return Object(b.jsx)(p,{comment:e},e._id)}))]})]})}function I(e){var t=e.post;return Object(b.jsx)(a.b,{to:"/post/"+t._id,children:Object(b.jsxs)(d.a,{style:{marginTop:10},children:[Object(b.jsx)("h2",{children:t.title}),Object(b.jsxs)("div",{style:{display:"flex"},children:[Object(b.jsx)(h.a,{src:t.user.image,style:{paddingRight:10}}),Object(b.jsx)("h3",{children:t.user.name})]}),Object(b.jsx)("span",{children:t.createdAt})]})})}function P(){return(P=Object(l.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3001/posts/all?skip=0&limit=5").catch((function(e){console.log(e)}));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){(function(){return P.apply(this,arguments)})().then((function(e){return r(e.data)}))}),[]),Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Posts"}),n.map((function(e){return Object(b.jsx)(I,{post:e},e._id)}))]})}var T=n(243);function L(){return(L=Object(l.a)(Object(i.a)().mark((function e(t){var n,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.stringify(t),e.next=3,fetch("http://localhost:3001/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:t});case 3:return n=e.sent,e.next=6,n.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){var t=e.setFlow,n=Object(c.useState)("bitop16986@chimpad.com"),r=Object(u.a)(n,2),s=r[0],a=r[1],o=Object(c.useState)("password"),i=Object(u.a)(o,2),l=i[0],j=i[1];return Object(b.jsxs)(d.a,{children:[Object(b.jsx)("h2",{children:"Login "}),Object(b.jsx)(O.a,{placeholder:"Email",value:s,onChange:function(e){return a(e.target.value)}}),Object(b.jsx)(O.a,{placeholder:"Password",type:"password",value:l,onChange:function(e){return j(e.target.value)}}),Object(b.jsx)(f.a,{type:"primary",onClick:function(){(function(e){return L.apply(this,arguments)})({email:s,password:l}).then((function(e){console.log(e);var t=e.data.token;localStorage.setItem("token",t),window.location.reload()})).catch((function(e){alert(e.message)}))},children:"Login"}),Object(b.jsx)(f.a,{type:"link",onClick:function(){return t("register")},children:"Register Instead"})]})}function E(){return(E=Object(l.a)(Object(i.a)().mark((function e(t){var n,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.image="https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/495.jpg",t=JSON.stringify({user:t}),console.log(t),e.next=5,fetch("http://localhost:3001/users",{method:"POST",headers:{"Content-Type":"application/json"},body:t});case 5:return n=e.sent,e.next=8,n.json();case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){var t=e.setFlow,n=Object(c.useState)("Umakant"),r=Object(u.a)(n,2),s=r[0],a=r[1],o=Object(c.useState)("bitop16986@chimpad.com"),i=Object(u.a)(o,2),l=i[0],j=i[1],h=Object(c.useState)("password"),p=Object(u.a)(h,2),x=p[0],m=p[1];return Object(b.jsxs)(d.a,{children:[Object(b.jsx)("h2",{children:"Register "}),Object(b.jsx)(O.a,{placeholder:"Name",value:s,onChange:function(e){return a(e.target.value)}}),Object(b.jsx)(O.a,{placeholder:"Email",value:l,onChange:function(e){return j(e.target.value)}}),Object(b.jsx)(O.a,{placeholder:"Password",type:"password",value:x,onChange:function(e){return m(e.target.value)}}),Object(b.jsx)(f.a,{type:"primary",onClick:function(){(function(e){return E.apply(this,arguments)})({name:s,email:l,password:x}).then((function(){alert("Registration successful")})).catch((function(e){alert(e.message)}))},children:"Register"}),Object(b.jsx)(f.a,{type:"link",onClick:function(){return t("login")},children:"Login Instead"})]})}var A=n(244),F=n(241),J=n(245);function N(){var e=Object(c.useContext)(g).user;return Object(b.jsx)(A.a,{overlay:Object(b.jsx)(F.a,{items:[{key:"1",label:e.name},{key:"2",label:Object(b.jsx)(f.a,{type:"link",children:"Logout"}),onClick:function(){localStorage.removeItem("token"),window.location.reload()}}]}),children:Object(b.jsx)("a",{onClick:function(e){return e.preventDefault()},children:Object(b.jsx)(J.b,{children:Object(b.jsx)(h.a,{src:e.image})})})})}var B=function(){var e=Object(c.useContext)(g),t=e.user,n=e.showUserModal,r=e.setShowUserModal,s=Object(c.useState)("login"),a=Object(u.a)(s,2),o=a[0],i=a[1];return Object(b.jsxs)(b.Fragment,{children:[t?Object(b.jsx)(N,{}):Object(b.jsx)(f.a,{type:"primary",onClick:function(){r(!0)},children:"Login"}),Object(b.jsx)(T.a,{title:"Basic Modal",visible:n,onOk:function(){r(!1)},onCancel:function(){r(!1)},children:"login"===o?Object(b.jsx)(M,{setFlow:i}):Object(b.jsx)(R,{setFlow:i})})]})};function _(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)(y,{children:[Object(b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(b.jsx)("h1",{children:"PT-WEB-04"}),Object(b.jsx)(B,{})]}),Object(b.jsx)(a.a,{children:Object(b.jsxs)(o.c,{children:[Object(b.jsx)(o.a,{path:"post/:postId",element:Object(b.jsx)(S,{})}),Object(b.jsx)(o.a,{path:"/",element:Object(b.jsx)(U,{})})]})})]})})}var H=document.getElementById("root");Object(s.createRoot)(H).render(Object(b.jsx)(c.StrictMode,{children:Object(b.jsx)(_,{})}))}},[[238,1,2]]]);
//# sourceMappingURL=main.2abbd279.chunk.js.map